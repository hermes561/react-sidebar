{"ast":null,"code":"import _objectWithoutProperties from \"/home/hermes/work/react/tutorial/sidebar/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"/home/hermes/work/react/tutorial/sidebar/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/hermes/work/react/tutorial/sidebar/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/hermes/work/react/tutorial/sidebar/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/hermes/work/react/tutorial/sidebar/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/hermes/work/react/tutorial/sidebar/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/hermes/work/react/tutorial/sidebar/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/hermes/work/react/tutorial/sidebar/src/ClickOutside.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nvar ClickOutside =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ClickOutside, _Component);\n\n  function ClickOutside(props) {\n    var _this;\n\n    _classCallCheck(this, ClickOutside);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ClickOutside).call(this, props));\n\n    _this.handle = function (e) {\n      if (e.type === 'touchend') _this.isTouch = true;\n      if (e.type === 'click' && _this.isTouch) return;\n      var onClickOutside = _this.props.onClickOutside;\n      var el = _this.container;\n      if (el && !el.contains(e.target)) onClickOutside(e);\n    };\n\n    _this.getContainer = _this.getContainer.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.isTouch = false;\n    return _this;\n  }\n\n  _createClass(ClickOutside, [{\n    key: \"getContainer\",\n    value: function getContainer(ref) {\n      this.container = ref;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          children = _this$props.children,\n          onClickOutside = _this$props.onClickOutside,\n          props = _objectWithoutProperties(_this$props, [\"children\", \"onClickOutside\"]);\n\n      return React.createElement(\"div\", Object.assign({}, props, {\n        ref: this.getContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21\n        },\n        __self: this\n      }), children);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      document.addEventListener('touchend', this.handle, true);\n      document.addEventListener('click', this.handle, true);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('touchend', this.handle, true);\n      document.removeEventListener('click', this.handle, true);\n    }\n  }]);\n\n  return ClickOutside;\n}(Component);\n\nClickOutside.propTypes = {\n  onClickOutside: PropTypes.func.isRequired\n};\nexport { ClickOutside as default };","map":{"version":3,"sources":["/home/hermes/work/react/tutorial/sidebar/src/ClickOutside.js"],"names":["React","Component","PropTypes","ClickOutside","props","handle","e","type","isTouch","onClickOutside","el","container","contains","target","getContainer","bind","ref","children","document","addEventListener","removeEventListener","propTypes","func","isRequired"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;;IAEqBC,Y;;;;;AAKnB,wBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,sFAAMA,KAAN;;AADiB,UAyBnBC,MAzBmB,GAyBV,UAAAC,CAAC,EAAI;AACZ,UAAIA,CAAC,CAACC,IAAF,KAAW,UAAf,EAA2B,MAAKC,OAAL,GAAe,IAAf;AAC3B,UAAIF,CAAC,CAACC,IAAF,KAAW,OAAX,IAAsB,MAAKC,OAA/B,EAAwC;AAF5B,UAGJC,cAHI,GAGe,MAAKL,KAHpB,CAGJK,cAHI;AAIZ,UAAMC,EAAE,GAAG,MAAKC,SAAhB;AACA,UAAID,EAAE,IAAI,CAACA,EAAE,CAACE,QAAH,CAAYN,CAAC,CAACO,MAAd,CAAX,EAAkCJ,cAAc,CAACH,CAAD,CAAd;AACnC,KA/BkB;;AAEjB,UAAKQ,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,uDAApB;AACA,UAAKP,OAAL,GAAe,KAAf;AAHiB;AAIlB;;;;iCAEYQ,G,EAAK;AAChB,WAAKL,SAAL,GAAiBK,GAAjB;AACD;;;6BAEQ;AAAA,wBACwC,KAAKZ,KAD7C;AAAA,UACCa,QADD,eACCA,QADD;AAAA,UACWR,cADX,eACWA,cADX;AAAA,UAC8BL,KAD9B;;AAEP,aAAO,6CAASA,KAAT;AAAgB,QAAA,GAAG,EAAE,KAAKU,YAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAyCG,QAAzC,CAAP;AACD;;;wCAEmB;AAClBC,MAAAA,QAAQ,CAACC,gBAAT,CAA0B,UAA1B,EAAsC,KAAKd,MAA3C,EAAmD,IAAnD;AACAa,MAAAA,QAAQ,CAACC,gBAAT,CAA0B,OAA1B,EAAmC,KAAKd,MAAxC,EAAgD,IAAhD;AACD;;;2CAEsB;AACrBa,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,UAA7B,EAAyC,KAAKf,MAA9C,EAAsD,IAAtD;AACAa,MAAAA,QAAQ,CAACE,mBAAT,CAA6B,OAA7B,EAAsC,KAAKf,MAA3C,EAAmD,IAAnD;AACD;;;;EA5BuCJ,S;;AAArBE,Y,CACZkB,S,GAAY;AACjBZ,EAAAA,cAAc,EAAEP,SAAS,CAACoB,IAAV,CAAeC;AADd,C;SADApB,Y","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\n\nexport default class ClickOutside extends Component {\n  static propTypes = {\n    onClickOutside: PropTypes.func.isRequired\n  }\n\n  constructor(props) {\n    super(props)\n    this.getContainer = this.getContainer.bind(this)\n    this.isTouch = false\n  }\n\n  getContainer(ref) {\n    this.container = ref\n  }\n\n  render() {\n    const { children, onClickOutside, ...props } = this.props\n    return <div {...props} ref={this.getContainer}>{children}</div>\n  }\n\n  componentDidMount() {\n    document.addEventListener('touchend', this.handle, true)\n    document.addEventListener('click', this.handle, true)\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('touchend', this.handle, true)\n    document.removeEventListener('click', this.handle, true)\n  }\n\n  handle = e => {\n    if (e.type === 'touchend') this.isTouch = true\n    if (e.type === 'click' && this.isTouch) return\n    const { onClickOutside } = this.props\n    const el = this.container\n    if (el && !el.contains(e.target)) onClickOutside(e)\n  }\n}\n\n"]},"metadata":{},"sourceType":"module"}